from Decoder import Decoder
import numpy as np

# n,k,d = 2**k, k+1, 2**(k-1)
# augmented hadamard code
class HadamardCodeDecoder(Decoder):
  def __init__(self, r=5):
    self.r = r
    cols = [x for x in range(2**(r-1))]
    bit_cols = [f'{x:0{r}b}' for x in cols]
    ibit_cols = [[int(x) for x in y] for y in bit_cols]
    self.G = np.array(ibit_cols)
    self.G = np.asmatrix(self.G)
    # self.G = np.transpose(self.G)

    # print(self.G)

  def decode(self, input_string):
    decoded = ""

    while input_string:
      uh = input_string[:2**(self.r-1)]
      input_string = input_string[2**(self.r-1):]

      lh = input_string[:2**(self.r-1)]
      input_string = input_string[2**(self.r-1):]

      uh = self.decode_integer(uh)
      lh = self.decode_integer(lh)

      decoded += chr(((uh&0xf)<<4)|(lh&0xf))

    return decoded

  def decode_integer(self, k):
    from random import randint

    # local decodability property
    bk = np.array([int(x) for x in k])
    x = 0

    for i in range(self.r-1):
      j = randint(0, len(bk)-1)
      k = j ^ (1<<(self.r-i-2))

      x |= (bk[j] ^ bk[k])<<(self.r-i-2)

    return x

if __name__ == '__main__':
  c = HadamardCodeDecoder()
  # print(c.encode_integer(5))
  print(c.decode('00001111000011110000111111110000001111000011110001101001100101100110100101101001001100110011001100111100001111000101101001011010001111000011110001011010101001010011001100110011000000000000000000111100001111000101010110101010011010010110100100000000000000000110100101101001011001100110011001101001011010010101101001011010001111000011110001011010101001010011001100110011000000000000000000111100001111000000111100001111001111000011110001101001100101100011110000111100000011111111000000111100001111000110100110010110011010010110100100110011001100110011001100110011000000000000000001101001011010010110011001100110001111000011110001010101101010100110100101101001000011110000111100110011001100110000000000000000001111000011110001010101010101010011110000111100010110101010010100111100001111000101101001011010011010010110100100001111000011110011001100110011000011111111000000110011001100110000000000000000001111000011110001100110011001100011110000111100011010011001011000111100001111000011110011000011011010010110100101100110011001100011110000111100010110100101101000111100001111000110011001100110011010010110100100001111000011110011110000111100010110100101101001101001011010010000111100001111011010010110100101011010010110100110100101101001001100110011001100110011001100110000000000000000001111000011110001010101010101010011110000111100000011110000111100111100001111000101010110101010011010010110100100000000000000000011110000111100010101011010101001101001011010010110011001100110001111000011110001100110011001100011110000111100010101011010101000111100001111000011110011000011001111000011110001101001011010010011001100110011000000000000000000111100001111000101101001011010001111000011110000001111111100000011110000111100010101011010101001101001011010010000111100001111001100110011001100111100110000110011001100110011000000000000000000001111000011110000111100001111001111000011110001101001100101100011110000111100001111001100001100111100001111000101101001011010001111000011110001100110011001100011001100110011000000000000000001101001011010010110011001100110001111000011110001011010010110100011110000111100000011110000111100110011001100110000000000000000001111000011110000111100001111000110100101101001001100110011001100111100001111000101010110101010001111000011110000111100110000110011110000111100011010010110100100111100001111000101010110101010001111000011110000001111111100000011110000111100000011111111000000111100001111000101010101010101001100110011001100000000000000000011110000111100011010011001011001101001011010010011001100110011001111000011110001100110011001100011110000111100010101011010101000110011001100110011110011000011001100110011001100000000000000000000111100001111010101011010101000111100001111000011110011000011011010010110100100001111000011110011110000111100010110100101101000111100001111000110100101101001001111000011110001011010010110100110100101101001001100110011001100110011001100110000000000000000001111000011110001010101010101010011110000111100011001100110011000111100001111000110011001100110011010010110100101011010010110100011110000111100010110101010010101101001011010010110011001100110001111000011110001010101010101010011110000111100001111001100001100110011001100110000000000000000001111000011110001101001100101100110100101101001001100110011001100111100001111000011110011000011001111000011110001010101010101010110100101101001001100110011001100111100001111000101101001011010001100110011001100000000000000000110100101101001000000000000000000111100001111000000111111110000001111000011110001010101010101010011110000111100011001100110011000111100001111000101101001011010011010010110100100110011001100110011110000111100010101010101010101101001011010010000111100001111001100110011001100111100110000110011001100110011000000000000000001011010010110100011110000111100001111000011110001011010010110100110100101101001011001100110011001101001011010010000111100001111001111000011110001010101101010100011110000111100001100110011001101101001011010010101101001011010001111000011110000001111111100000110100101101001010110100101101000111100001111000101101010100101001100110011001100000000000000000011110000111100010101010101010100110011001100110000000000000000011010010110100100000000000000000110100101101001010110100101101001101001011010010011001100110011011010010110100101011010010110100110100101101001011001100110011000110011001100110000000000000000011010010110100101011010010110100110100101101001000011110000111100110011001100110000000000000000011010010110100100110011001100110011110000111100010101011010101001101001011010010110011001100110011010010110100101011010010110100110100101101001011001100110011000110011001100110000000000000000001111000011110001010101010101010011110000111100000011111111000000111100001111000101010110101010011010010110100101010101010101010110100101101001010110100101101000111100001111000101010101010101001111000011110001011010101001010011001100110011000000000000000000111100001111000101101010100101001111000011110001101001100101100011110000111100000011111111000000111100001111000101101001011010011010010110100101100110011001100110100101101001000011110000111100111100001111000101010110101010001111000011110001011010010110100011001100110011000000000000000001101001011010010110011001100110001111000011110001011010010110100011110000111100000011110000111100110011001100110000000000000000001111000011110001011010010110100011110000111100011010010110100100111100001111000101101001011010011010010110100100001111000011110011001100110011000000000000000000111100001111000011110011000011001111000011110001011010010110100110100101101001010101010101010101101001011010010101101001011010001111000011110001011010010110100011001100110011001111001100001100110011001100110000000000000000000011110000111101011010101001010011110000111100010101010101010100111100001111000101101001011010001111000011110001100110011001100011110000111100010110100101101000111100001111000011110011000011001111000011110001010101010101010110100101101001011001100110011000110011001100110000000000000000011010010110100100111100001111000011110000111100010110100101101000111100001111000000000011111111001111000011110001010101101010100011110000111100011001100110011001101001011010010101101001011010001111000011110000001111111100000011110000111100010101010101010100110011001100110000000000000000011010010110100101100110011001100011110000111100010110100101101000111100001111000101101010100101001100110011001100000000000000000011110000111100001100111100110001101001011010010101101001011010011010010110100101100110011001100110100101101001000011110000111100111100001111000110100110010110001100110011001100001111111100000011001100110011000000000000000001101001011010010101010101010101011010010110100101011010010110100011110000111100010101011010101001101001011010010110011001100110001100110011001100000000000000000110100101101001001100110011001100111100001111000000000011111111001111000011110001101001100101100011110000111100001111001100001100111100001111000110011001100110011010010110100101011010010110100110100101101001011001100110011000110011001100110000000000000000001111000011110000111100110000110110100101101001010110100101101000111100001111000000111111110000001111000011110000001111111100000011110000111100010101010101010100110011001100110000000000000000011010010110100101100110011001100011110000111100011010011001011000111100001111000000111111110000001111000011110000001111111100000011110000111100010101011010101000111100001111000110011001100110001111000011110001010101101010100110100101101001000011110000111101101001011010010101101001011010001111000011110000001111000011110011110000111100010101011010101000111100001111000011110011000011001100110011001100000000000000000011110000111100001111001100001100111100001111000110100110010110001111000011110000111100110000110011001100110011001111001100001100110011001100110000000000000000010110100101101001011010010110100110100101101001000011110000111100110011001100110000000000000000001111000011110000111100110000110011110000111100011010011001011000111100001111000011110011000011001100110011001100000000000000000110100101101001011001100110011000111100001111000101101001011010001111000011110001011010101001010011001100110011000000000000000000111100001111000110100110010110011010010110100100110011001100110011110000111100011001100110011000111100001111000101010110101010001100110011001100111100110000110011001100110011000000000000000000001111000011110101010101010101001111000011110000001111111100000011110000111100010101011010101001101001011010010101010101010101011010010110100101011010010110100011110000111100010101010101010100111100001111000101101010100101001100110011001100000000000000000011110000111100010110100101101001101001011010010011001100110011001111000011110001010101010101010110100101101001000011110000111100110011001100110000000000000000011010010110100100111100001111000011110000111100011010011001011000111100001111000000111111110000011010010110100101011010010110100110100101101001000011110000111101101001011010010000000000000000001111000011110001010101010101010110100101101001000011110000111100110011001100110011110011000011001100110011001100000000000000000000111100001111010110100101101001101001011010010000111100001111001111000011110001010101101010100011110000111100010101010101010100111100001111000101101010100101001100110011001100000000000000000011110000111100011001100110011000111100001111000110100110010110001111000011110000111100110000110011110000111100011010010110100101101001011010010101101001011010001111000011110001011010010110100011001100110011000000000000000001101001011010010110011001100110001111000011110001101001100101100011110000111100000011110000111100111100001111000101010101010101001111000011110000001111111100000011110000111100010110100101101001101001011010010110011001100110001100110011001100000000000000000011110000111100010110100101101000111100001111000000111111110000001111000011110001010101101010100110100101101001000011110000111100110011001100110000000000000000001111000011110000111100110000110011110000111100011010011001011000111100001111000011110011000011001100110011001100000000000000000011110000111100000011111111000000111100001111000101010101010101001111000011110001101001100101100110100101101001001100110011001100111100001111000101101001011010001111000011110001011010010110100110100101101001000011110000111100110011001100110011110011000011001100110011001100000000000000000000111100001111010110101010010100111100001111000110100110010110011010010110100100110011001100110011110000111100001100110011001100111100001111000101010110101010001100110011001100000000000000000110100101101001011001100110011000111100001111000101101001011010001111000011110001011010101001010110100101101001000000000000000000111100001111000101101001011010011010010110100100110011001100110011001100110011000000000000000000111100001111000110100101101001011010010110100100110011001100110011110000111100010101010101010101101001011010010011110000111100001111000011110001010101101010100011110000111100000011110000111100111100001111000101010101010101001100110011001100000000000000000011110000111100010110100101101001101001011010010000000011111111001100110011001100001111111100000011001100110011000000000000000000111100001111000101010101010101001111000011110001100110011001100011001100110011000000000000000001101001011010010110011001100110011010010110100101011010010110100110100101101001011001100110011000111100001111000110011001100110001111000011110001010101101010100110100101101001000000000000000000111100001111000101010110101010011010010110100100001111000011110011001100110011000000000000000001101001011010010110011001100110001111000011110001011010010110100011110000111100010110101010010100110011001100110000000000000000011010010110100100111100001111000011110000111100010101010101010101101001011010010011001100110011001111000011110001010101101010100110100101101001010110100101101001101001011010010110011001100110001100110011001100000000000000000110100101101001010110100101101001101001011010010000111100001111001100110011001100111100110000110011001100110011000000000000000000001111000011110110011001100110011010010110100101011010010110100110100101101001001100110011001100111100001111000101010101010101001111000011110000110011001100110011110000111100010101011010101001101001011010010000111100001111011010010110100101011010010110100110100101101001001100110011001100110011001100110000000000000000011010010110100100000000000000000011110000111100011010011001011001101001011010010110011001100110011010010110100101011010010110100011110000111100010110100101101001101001011010010011001100110011001111000011110001011010010110100011001100110011000000000000000000111100001111000011110011000011001111000011110001011010010110100011110000111100011001100110011000110011001100110000000000000000001111000011110001011010101001010011110000111100010101010101010101101001011010010110011001100110011010010110100101100110011001100011110000111100010101010101010100110011001100110000000000000000011010010110100100111100001111000011110000111100010101011010101001101001011010010000111100001111001111000011110001010101010101010011110000111100010110100101101000110011001100110000000000000000011010010110100100111100001111000011110000111100010110100101101000111100001111000011110011000011001111000011110001011010010110100011110000111100001111001100001100111100001111000101010101010101011010010110100100001111000011110011110000111100010101011010101001101001011010010110011001100110001100110011001100111100110000110011001100110011000000000000000001011010010110100000000000000000011010010110100100110011001100110011110000111100011010011001011000111100001111000101010110101010001111000011110000111100110000110011001100110011000000000000000000111100001111000000111100001111001111000011110001010101010101010110100101101001000000000000000000111100001111000101010110101010001111000011110000110011001100110110100101101001010110100101101001101001011010010110011001100110001100110011001100000000000000000011110000111100010110100101101001101001011010010000000011111111001100110011001100000000000000000011110000111100010101010101010101101001011010010000111100001111001100110011001100000000000000000011110000111100010101011010101000111100001111000011110011000011011010010110100100001111000011110011110000111100010110100101101001101001011010010011001100110011001111000011110000001111000011110110100101101001010110100101101000111100001111000101101010100101001100110011001100000000000000000011110000111100000011111111000000111100001111000101010101010101001111000011110001100110011001100011110000111100010101011010101000111100001111000011110011000011001111000011110001010101101010100011110000111100010101010101010100110011001100110011110011000011001100110011001100000000000000000101101001011010000000000000000001101001011010010011001100110011001111000011110001101001100101100011110000111100010101011010101000111100001111000011110011000011001100110011001100000000000000000110100101101001000000000000000001101001011010010101101001011010001111000011110000001111111100000110100101101001001111000011110000111100001111000101010110101010001111000011110000111100110000110011110000111100010101010101010101101001011010010011001100110011001100110011001100000000000000000011110000111100000011111111000000111100001111000110100110010110011010010110100100110011001100110011110000111100010110100101101000111100001111000101101010100101001100110011001100000000000000000011110000111100000011111111000000111100001111000101010101010101001111000011110001100110011001100110100101101001010110100101101001101001011010010110011001100110001100110011001100001111111100000011001100110011000000000000000001101001011010010101010101010101011010010110100101011010010110100011110000111100010101011010101001101001011010010110011001100110001100110011001100000000000000000011110000111100010110100101101000111100001111000011110000111100001111000011110000111100001111000011110000111100010101011010101000111100001111000110011001100110001111000011110001010101101010100110100101101001000011110000111101101001011010010101101001011010011010010110100100110011001100110011001100110011000000000000000000111100001111000101101010100101001111000011110001011010010110100110100101101001000011110000111101101001011010010101101001011010011010010110100101100110011001100011001100110011000000000000000001101001011010010011110000111100001111000011110001010101101010100110100101101001001111000011110000111100001111000101101001011010011010010110100100110011001100110110100101101001001100110011001100111100001111000101010101010101001100110011001100000000000000000011110000111100010110100101101001101001011010010101101001011010001100110011001100111100110000110011001100110011000000000000000000001111000011110101101010100101001111000011110001010101010101010110100101101001010110100101101001101001011010010011001100110011001111000011110001010101101010100110100101101001011001100110011000110011001100110000000000000000001111000011110001010101010101010011001100110011000000000000000000111100001111000011110011000011001111000011110001010101101010100110100101101001011001100110011000111100001111000000111111110000001100110011001100000000000000000110100101101001001111000011110000111100001111000101101001011010001111000011110000111100110000110011110000111100010110100101101000111100001111000011110011000011001111000011110001010101010101010110100101101001000011110000111100111100001111000101010110101010011010010110100101100110011001100011001100110011000011111111000000110011001100110000000000000000001111000011110000111100001111000011110000111100010110100101101001101001011010010101101001011010001111000011110001101001011010010011110000111100010101011010101000111100001111000101010101010101011010010110100100001111000011110011001100110011000000000000000000111100001111000110100110010110001111000011110000001111000011110011110000111100010101011010101000111100001111000110100110010110001100110011001100000000000000000011110000111100001111001100001100111100001111000110100110010110001111000011110000111100110000110011001100110011000011111111000000110011001100110000000000000000001111000011110001011010101001010011110000111100010101010101010101101001011010010000111100001111011010010110100100001111000011110011110000111100010101011010101001101001011010010110011001100110001100110011001100000000000000000011110000111100001111001100001100111100001111000101101001011010011010010110100101010101010101010110100101101001010110100101101000111100001111000101101001011010001100110011001100111100110000110011001100110011000000000000000000001111000011110101010110101010001111000011110000111100110000110011001100110011000000000000000001101001011010010011110000111100001111000011110001011010010110100011110000111100000011111111000000111100001111000101010110101010011010010110100100001111000011110011001100110011000000000000000000111100001111000101010101010101011010010110100100110011001100110011110000111100011001100110011001101001011010010101101001011010001100110011001100001111111100000011001100110011000000000000000001101001011010010110011001100110001111000011110001010101010101010011110000111100011010010110100100111100001111000101010110101010011010010110100100001111000011110110100101101001000011110000111100111100001111000101010110101010011010010110100101100110011001100011001100110011000000000000000001101001011010010011110000111100001111000011110001011010010110100011110000111100000011111111000000110011001100110000000000000000001111000011110000111100110000110011110000111100010110100101101001101001011010010101010101010101011010010110100101011010010110100011110000111100010110100101101000110011001100110000000000000000001111000011110001011010010110100110100101101001010110100101101000110011001100110000111111110000001100110011001100000000000000000011110000111100011001100110011000111100001111000110100110010110001111000011110000111100110000110110100101101001001111000011110000111100001111000101010101010101001111000011110000001111111100000011110000111100000011111111000000111100001111000101010110101010011010010110100101100110011001100011001100110011000000000000000000111100001111000110011001100110001111000011110001101001100101100011110000111100001111001100001100111100001111000000111100001111001111000011110001010101101010100011110000111100010110101010010100111100001111000101101001011010001111000011110000111100110000110110100101101001000011110000111101101001011010010101101001011010001111000011110001011010101001010011001100110011000000000000000001101001011010010000111100001111001111000011110001101001100101100110100101101001001100110011001101101001011010010000111100001111001111000011110001101001100101100110100101101001001100110011001100110011001100110011110011000011'))